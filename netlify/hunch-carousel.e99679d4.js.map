{"version":3,"sources":["../src/hunch-carousel.ts"],"names":[],"mappings":"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","file":"hunch-carousel.e99679d4.js","sourceRoot":"../www","sourcesContent":["// Icons from https://material.io/resources/icons\nconst iconPrev = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"32\" height=\"32\" fill=\"white\"><path d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\"/></svg>`;\nconst iconNext = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"32\" height=\"32\" fill=\"white\"><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z\"/></svg>`;\n\nconst controlStyles = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  position: \"absolute\",\n  top: 0,\n  bottom: 0,\n  width: \"6rem\",\n  cursor: \"pointer\",\n  zIndex: 1\n};\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n<style>\n:host {\n  position: relative;\n  display: block;\n  overflow: hidden;\n}\n\n::slotted(*) {\n  display: none;\n  position: absolute;\n  top:0;\n  right:0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n::slotted(.prev),\n::slotted(.next),\n::slotted(.active) {\n  display: block;\n}\n\n::slotted(.left) {\n  transform: translateX(-100%);\n  transition: transform 0.6s;\n}\n::slotted(.next.active) {\n  left: 100%;\n}\n\n::slotted(.right) {\n  transform: translateX(100%);\n  transition: transform 0.6s;\n}\n::slotted(.prev.active) {\n  left: -100%;\n}\n\n:host([crossfade]) ::slotted(*) {\n  display: block;\n  transition: opacity 0.6s;\n  opacity: 0;\n}\n:host([crossfade]) ::slotted(.active) {\n  opacity: 1;\n  transform: none;\n  left: 0;\n}\n</style>\n<slot>No slides</slot>\n`;\n\nclass HunchCarousel extends HTMLElement {\n  active: number = 0;\n  timer: number = -1;\n  touchStartScreenX: number = 0;\n  interval: number = 4000;\n\n  static get observedAttributes() {\n    return [\"interval\"];\n  }\n\n  attributeChangedCallback(name: string, _: number, newVal: number) {\n    if (name === \"interval\") {\n      this.interval = newVal;\n    }\n  }\n\n  connectedCallback() {\n    const shadow = this.attachShadow({ mode: \"open\" });\n    shadow.appendChild(template.content.cloneNode(true));\n    this.render();\n    this.addControls();\n    this.addEventListener(\"touchstart\", this.onTouchStart);\n    this.addEventListener(\"touchend\", this.onTouchEnd);\n  }\n\n  restartTimer = () => {\n    window.clearInterval(this.timer);\n    this.timer = window.setTimeout(() => {\n      this.next();\n    }, this.interval);\n  };\n\n  getSlides = () => {\n    return this.children;\n  };\n\n  addControls = () => {\n    const controlPrev = document.createElement(\"div\");\n    controlPrev.innerHTML = iconPrev;\n    Object.assign(controlPrev.style, controlStyles, {\n      left: 0\n    });\n    controlPrev.addEventListener(\"click\", this.prev);\n    const controlNext = document.createElement(\"div\");\n    controlNext.innerHTML = iconNext;\n    Object.assign(controlNext.style, controlStyles, {\n      right: 0\n    });\n    controlNext.addEventListener(\"click\", this.next);\n\n    if (this.shadowRoot) {\n      this.shadowRoot.appendChild(controlPrev);\n      this.shadowRoot.appendChild(controlNext);\n    }\n  };\n\n  onTouchStart = (e: TouchEvent) => {\n    const touches = e.changedTouches;\n    if (touches.length === 1) {\n      const touch = touches[0];\n      this.touchStartScreenX = touch.screenX;\n    }\n  };\n\n  onTouchEnd = (e: TouchEvent) => {\n    const touches = e.changedTouches;\n    if (touches.length === 1) {\n      const touch = touches[0];\n      if (Math.abs(touch.screenX - this.touchStartScreenX) > 30) {\n        if (touch.screenX < this.touchStartScreenX) {\n          this.next();\n        } else {\n          this.prev();\n        }\n      }\n    }\n  };\n\n  prev = () => {\n    this.render(false);\n  };\n\n  next = () => {\n    this.render();\n  };\n\n  getPrevIndex = () => {\n    const prev = this.active - 1;\n    return prev < 0 ? this.getSlides().length - 1 : prev;\n  };\n\n  getNextIndex = () => {\n    const next = this.active + 1;\n    const total = this.getSlides().length;\n    return next >= total ? 0 : next;\n  };\n\n  render(next = true) {\n    const positionCls = next ? \"next\" : \"prev\";\n    const transitionCls = next ? \"left\" : \"right\";\n    const slides = this.getSlides();\n    const length = slides.length;\n    if (this.timer === -1) {\n      const el = slides[0] as HTMLElement;\n      el.classList.add(\"active\");\n    } else {\n      const nextIndex = next ? this.getNextIndex() : this.getPrevIndex();\n      const elCurrent = slides[this.active] as HTMLElement;\n      const elNext = slides[nextIndex] as HTMLElement;\n      elCurrent.classList.add(positionCls);\n      elCurrent.classList.remove(\"active\");\n      elNext.classList.add(\"active\", positionCls);\n      setTimeout(() => {\n        elCurrent.classList.add(transitionCls);\n        elNext.classList.add(transitionCls);\n      });\n      setTimeout(() => {\n        for (let i = 0; i < length; i++) {\n          const el = slides[i] as HTMLElement;\n          el.classList.remove(\"left\", \"right\", \"next\", \"prev\");\n        }\n        this.active = nextIndex;\n      }, 600);\n    }\n    this.restartTimer();\n  }\n}\n\ncustomElements.define(\"hunch-carousel\", HunchCarousel);\n\nexport {};\n"]}